<!-- results -->
    
<div id="issue_panel">
    <% if params.key?(:issue_id) %>
    <!-- generate an issue header when browsing -->
        <h3>
            <%= "Vol. " + @issue['Volume'].to_s + ", No. " + @issue['Issue'].to_s + ", " + @issue['Season'].to_s + " " + @issue['Year'].to_s %>
        </h3>
    <% elsif params.key?(:search) %>
    <!-- if no issue_id, we're not browsing. so show the results of the search -->
        <%= @results_length %> total search results for "<%= params[:search] %>". <%= link_to "clear search", root_path %>
    <% end %>
    <!-- for each article, generate the metadata for that article -->
    <% if @articles != nil && (params.key?(:search) || params.key?(:issue_id)) %>
        <% @articles.each do |article| %>
            <!-- generate the issue information for the article. see app/controllers/pages_controller.rb for more info -->
            <%= generate_issue_info(article) %>
            <p class="metadata">
            <!-- see app/controllers/pages_controller.rb for information on how the metadata for an article is getting populated here. -->
                <%= generate_title(article) %>
                <%= generate_author(article) %>
                <%= generate_page_nums(article) %>
                <%= generate_genres(article) %>
                <%= generate_reviews(article) %>
                <%= generate_notes(article)%>
            </p>
            <hr>
        <% end %>
        <!-- create the pagination links -->
    <%= will_paginate @articles %>
    <% end %>
</div>

